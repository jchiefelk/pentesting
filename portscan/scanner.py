import socket
import subprocess 
import sys
from datetime import datetime

#Clear the screen
subprocess.call('clear',shell=True)

#Ask for Input
remoteServer    = input("Enter a remote host to scan: ")
remoteServerIP = socket.gethostbyname(remoteServer)

# Print a nice banner w/ Info on which host we're about to scan
print("-" * 60)
print("Please wait, scanning remote host", remoteServerIP)
print("-" * 60)

#Check what time the scan started
t1 = datetime.now()

# Using the range function to specify ports (here it will scan all ports between 1 & 1024)

# We also put in some error handling for catching error
try:
	for port in range(1,1025):
		# AF_INET refers to the address family ipv4
		# SOCK_STREAM means connection oriented TCP protoco
		sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
		result = sock.connect_ex((remoteServerIP,port))
		if result ==0:
			print("Port {}:	Open".format(port) )
		sock.close()


except KeyboardInterrupt:
	print("You pressed Ctrl+C")
	sys.exit()

except socket.error:
	print("Couldn't connect to server")
	sys.exit()

# Checking the time again
t2 = datetime.now()

#Calculates how long took to run script
total = t2-t1;
print('Scanning completed in:', total)